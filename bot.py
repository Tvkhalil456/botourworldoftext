import requests

# URL de l'API
URL = "https://ourworldoftext.com/_/write"

# Ton ASCII TROLL (triple guillemets pour plusieurs lignes)
TEXT = """███████████████████████████████████████
████████████████████████████████████████
█░▄▄░░▀█████████░▄▄░▄▄░██████▀░▄▄░██████
█░██▄▄░▄▄░▄▄▄░▄▄░▄▄░██▄▄░░▄▄▄▄░██▄▄▄▄▀██
█░██▀▀░██░███░██░██░██▀▀░███▀▀░███▀███░█
█░██▄▄░██▄███▄██░██░██▄▄░███▄▄░███░███░█
█▄▀▀▀▀░▀▀▀▀▀▀▀▀▀░▀▀░▀▀▀▀░░▀▀▀▀░▀▀▀░▀▀▀░█
███▄▄░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▄▄██
████████████████████████████████████████
████████████████████████████████████████
████████████████████████████████████████
█████████░░░░░░░░░░░░░░░░░░░░░░░████████
████████▀░░░██████████████████░░████████
████████░░░░██████████████████░░████████
████████░░░░██████░░████░░████░░████████
████████░░░░██████░░████░░████░░████████
████████░░░░██████░░████░░████░░████████
████████░░░░██████▄▄████▄▄████░░████████
████████░░░░████████████████▀░░▄████████
████████░░░░▀▀▀▀████▀▀▀▀▀▀▀░░▄██████████
████████░░░░░░░░░█▀░░░░░░░░▄████████████
████████▄▄▄▄▄▄░░░░░░▄▄▄▄▄▄██████████████
██████████████░░░░▄█████████████████████
████████████████████████████████████████
████████████████████████████████████████"""

def write_char(x, y, ch):
    payload = {
        "world": "main",
        "tiles": {
            "0,0": {
                "chars": [{"x": x, "y": y, "ch": ch}]
            }
        }
    }
    try:
        r = requests.post(URL, json=payload)
        r.raise_for_status()  # provoque une exception si code HTTP != 200
        print(f"Écrit '{ch}' en ({x},{y})")
    except Exception as e:
        print("❌ ERREUR:", e)

def write_text(text, start_x=4, start_y=1):
    x, y = start_x, start_y
    for ch in text:
        if ch == "\n":  # gestion du retour à la ligne
            y += 1
            x = start_x
            continue
        write_char(x, y, ch)
        x += 1

if __name__ == "__main__":
    write_text(TEXT, start_x=4, start_y=1)
    print("✅ Message écrit avec succès !")
